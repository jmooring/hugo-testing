{{ define "main" }}
  {{ with .Params.details }}
    <p>Details: <a href="{{ . }}">{{ . }}</a></p>
  {{ end }}
  {{ with .Params.description }}
    <p>Description: {{ . }}</p>
  {{ end }}
  {{ with or .Params.url .Params.details }}
    <hr>
  {{ end }}
  {{ .Content }}

  {{/* Capture the overlay image as a resource. */}}
  {{ $overlay := "" }}
  {{ with resources.Get "images/logo.png" }}
    {{ $overlay = . }}
  {{ end }}

  {{/* Create the filter. */}}
  {{ $filter := images.Overlay $overlay 20 20 }}

  <h2>Logo only</h2>

  {{ with resources.Get "images/logo.png" }}
    <img src="{{ .RelPermalink }}" width="{{ .Width }}" height="{{ .Height }}" alt="">
  {{ end }}

  <h2>Overlay on 1_input.png</h2>
  <p>The base image is PNG color type 3 (indexed).</p>

  {{/* Apply the filter using the images.Filter function. */}}
  {{ with resources.Get "images/1_input.png" }}
    {{ with . | images.Filter $filter }}
      <img src="{{ .RelPermalink }}" width="{{ .Width }}" height="{{ .Height }}" alt="">
    {{ end }}
  {{ end }}

  <h2>Overlay on 8_input.png</h2>
  <p>The base image is PNG color type 2 (true color).</p>

  {{/* Apply the filter using the images.Filter function. */}}
  {{ with resources.Get "images/8_input.png" }}
    {{ with . | images.Filter $filter }}
      <img src="{{ .RelPermalink }}" width="{{ .Width }}" height="{{ .Height }}" alt="">
    {{ end }}
  {{ end }}

{{ end }}
