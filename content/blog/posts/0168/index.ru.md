---
type: post
date: "2012-11-17T00:00:00Z"
title: "Создание XML-файла обоев в Ubuntu/GNOME 3"
tags:
    - Gnome
    - Linux
    - Ubuntu
    - Unity
    - yktools
    - обои
    - инструкция
    - полезные советы
software: yktools
---

Я уже [приводил](0122) скрипт, устанавливающий случайный файл изображения в качестве обоев рабочего стола. У него есть лишь один недостаток: его требуется запускать каждый раз, чтобы сменить обои.

Между тем, ещё в GNOME 2.28 появилась возможность установить на обои слайд-шоу в виде списка картинок в XML-файле. В нём указывается последовательность и длительность отображения каждого изображения. Более того, в нём можно даже указать плавный переход от одного изображения к другому.

Я решил создать простой скрипт, генерирующий XML-файл из заданного набора изображений и опционально устанавливающий его в качестве обоев. Для работы скрипта нужен GNOME 3+ или Ubuntu (начиная 11.10).

<!--more-->

## Исходный код {#source-code}

Скачать самую свежую версию можно на [странице скрипта](/software/yktools) на моём сайте.

## Параметры {#arguments}

Скрипт получился довольно универсальным. Использовать его нужно следующим образом:

    generate-wallpaper-xml [options] pictures_dir xml_file

Здесь:

 * `options`       - Любое сочетание следующих опций:
   * `-d <число>`  - Переопределить длительность отображения по умолчанию (1795 секунд, то есть примерно полчаса)
   * `-s <режим>`  - Упорядочить файлы в соответствии с `режимом`, допустимые значения которого:
     * `name`      - Отсортировать список по пути и имени файла
     * `shuffle`   - Перемешать список файлов
   * `-t <числоi>` - Переопределить длительность перехода между изображениями по умолчанию (5 секунд). Если указано значение 0, переход не используется
   * `-v`          - Выводить детальную информацию
   * `-w`          - Установить созданный XML-файл в качестве обоев
 * `pictures_dir`  - Путь к каталогу с изображениями
 * `xml_file`      - Путь к создаваемому XML-файлу

## Примеры использования {#usage-examples}

 * `generate-wallpaper-xml ~/Pictures ~/Pictures/wallpapers.xml`

   Создаёт файл `wallpapers.xml` в подкаталоге `Pictures` (из домашнего каталога пользователя) на основе изображений из этого же подкаталога.

 * `generate-wallpaper-xml -w ~/Pictures ~/Pictures/wallpapers.xml`

   То же самое, но дополнительно устанавливает сгенерированный файл в качестве текущих обоев.

 * `generate-wallpaper-xml -w -d 600 -t 0 ~/Pictures ~/Pictures/wallpapers.xml`

   То же самое, плюс длительность отображения каждого файла установлена в 10 минут (600 секунд), а переходы между изображениями отключены.

 * `generate-wallpaper-xml -w -s shuffle -d 600 -t 0 ~/Pictures ~/Pictures/wallpapers.xml`

   То же самое, плюс список файлов перемешивается, так что они следуют в случайном порядке.
